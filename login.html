<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
		<table>
			<tr>
				<td><input type="text" id="username" /></td>
				<td><p id="tip_user"></p></td>
			</tr>
			<tr>
				<td><input type="password" id="password" /></td>
				<td><p id="tip_pass"></p></td>
			</tr>
			<tr>
				<td><input type="button" value="login" id="login"/></td>
			</tr>
		</table>
	</body>
	
</html>
<script type="text/javascript" src="easyui/jquery.min.js"></script>
<script>
	/*
	 * 登陆
	 */
	$("#login").on("click", function(){
		var username = $("#username").val();
		var password = $("#password").val();
		
		if(username == "" && username.length == 0){
			$("#tip_pass").hide();
			$("#tip_user").empty().append('<span class="error_input">用户名不能为空</span>').show();
			return;
		}else if(password == "" && password.length == 0){
			$("#tip_user").hide();
			$("#tip_pass").empty().append('<span class="error_input">密码不能为空</span>').show();
			return;
		}
		
		$.ajax({
			type:"post",
			url:"http://localhost:8001/manager/login",
			dataType: "json",
			xhrFields: {withCredentials:true},
			data: ({
				'username': username,
				'password': password
			}),
			success: function(data){
				if(data.code == 0){
					$("#tip_pass").hide();
					$("#tip_user").empty().append('<span class="error_input">用户不存在</span>').show();
					return;
				}else if(data.code == 1){
					$("#tip_user").hide();
					$("#tip_pass").empty().append('<span class="error_input">密码错误</span>').show();
					return;
				}else if(data.code == 2){
					$("#tip_pass").hide();
					$("#tip_user").empty().append('<span class="error_input">出现异常，请联系管理员！</span>').show();
					return;
				}else if(data.code == 3){
					alert(data.message);
					top.location.href="index.html";
				}
				
			},
			error: function(){
				alert("error");
			}
		});
	});
	
	
</script>
